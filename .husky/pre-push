#/bin/bash 

bash << EOF

set -x # Print commands and their arguments as they are executed
set -e # Exit immediately if a command exits with a non-zero status

make_dir_if_not_exists () {
    if [ ! -d $1 ]; then
        # Create the directory
         mkdir -p $1
    fi
}

# Copy the source files to the api folder
copy_file () {

    # Add a warning to the top of the file
    echo "// AUTOGENERATED FILE DO NOT EDIT" > $2
    echo "// SOURCE FILE: ${1:2}" >> $2

    # Append the source file to the destination file
    cat $1 >> $2
}

make_dir_if_not_exists ./api
make_dir_if_not_exists ./api/users

copy_file ./pkg/users.go ./api/users.go
copy_file ./pkg/users/users.go ./api/users/[id].go

# vercel --prod

EOF